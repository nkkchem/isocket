machine:
  environment:
    PYTHONPATH: "/home/ubuntu:$PYTHONPATH"
  python:
    version: 3.5.0
dependencies:
  pre:
    # isambard
    - pip install --upgrade pip
    - cd /home/ubuntu/
    - git clone https://github.com/woolfson-group/isambard.git
    - mv isambard /home/ubuntu/
    - mv web/dependencies_for_isambard /home/ubuntu/isambard
    # DSSP
    - chmod +x /home/ubuntu/isambard/dependencies_for_isambard/dssp/dssp-2.0.4
    - python /home/ubuntu/isambard/isambard/configure.py -C
test:
  override:
    - cd /home/ubuntu/isocket
    - python configure.py -C
    - cd web/
    - PYTHONPATH=$PYTHONPATH:/home/ubuntu/isambard/:/home/ubuntu/isocket/web/ python -m unittest discover /home/ubuntu/isocket/web/unit_tests/. -v