machine:
  environment:
    PYTHONPATH: "/home/ubuntu:$PYTHONPATH"
  python:
    version: 3.5.0
dependencies:
  pre:
    # isambard
    - pip install --upgrade pip
    - cd /home/ubuntu/
    - git clone https://github.com/woolfson-group/isambard_dev.git
    - mv isambard_dev /home/ubuntu/
    - python /home/ubuntu/isambard_dev/configure.py -C
    # Scwrl
    - wget https://www.dropbox.com/s/7qe06wsyu4lxufb/install_Scwrl4_Linux?dl=0 -O install_Scwrl4
    - wget https://www.dropbox.com/s/etuhyqzajzbdfnl/scwrl_install.txt?dl=0 -O scwrl_install.txt
    - chmod +x install_Scwrl4
    - ./install_Scwrl4 < scwrl_install.txt
    # Reduce
    - wget http://kinemage.biochem.duke.edu/php/downlode-3.php?filename=/../downloads/software/reduce31/reduce.3.23.130521.linuxi386.gz -O reduce.3.23.130521.linuxi386.gz
    - gunzip reduce.3.23.130521.linuxi386.gz
    - chmod +x reduce.3.23.130521.linuxi386
    # DSSP
    - wget https://www.dropbox.com/s/1l9b6snhgnoe8he/dssp-2.0.4?dl=0 -O dssp-2.0.4
    - chmod +x dssp-2.0.4
test:
  override:
    - cd /home/ubuntu/isocket
    - python configure.py -C
    - mv dssp-2.0.4 /home/ubuntu/isambard_dev/
    - python -m unittest discover unit_tests/. -v